<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
    <!-- 把它设置为开发模式，发布时要设置为false -->
    <constant name="struts.devMode" value="true" />
    <!-- 设置在class被修改时是否热加载，发布时要设置i为false -->
    <constant name="struts.convention.classes.reload" value="true"/>
    <!-- 指定全局国际化资源文件 -->
	<constant name="struts.custom.i18n.resources" value="mess" />
    <!-- 国际化编码所使用的字符集编码utf-8 -->
    <constant name="struts.i18n.encoding" value="utf-8" />
    <!-- 设置存放临时文件的目录 -->
    <constant name="struts.multipart.saveDir" value="/tmp"/>
    <constant name="struts.multipart.maxSize" value="900000000"/> 
    <!-- 拦截后缀名 action,html -->
    <constant name="struts.action.extension" value="action,html" />
	
	<!-- 公共接口 -->
	<package name="commonPackage" extends="struts-default,json-default">
		<default-action-ref name="pageNotFund"></default-action-ref> 
		<action name="pageNotFund">
		   <result>/html/404error.jsp</result> 
		</action>
		
		<action name="startCaptcha" class="startCaptchaAction" method="setChallenge"></action>
		<action name="securityCodeImage" class="securityCodeImageAction" method="setChallenge">
		 	<result name="success" type="stream">  
               <param name="contentType">image/jpeg</param> 
               <param name="inputName">imageStream</param>  
               <param name="bufferSize">2048</param>  
            </result>
		</action>
		<action name="verifyLogin" class="verifyLoginAction" method="doValidate">
			<result name="success" type="json"></result>
		</action>
	</package>
	<!-- 外部用户 -->
	<package name="userPackage" extends="struts-default,json-default">
		<action name="user*" class="userAction" method="{1}">
			<result name="success" type="json"></result>
		</action>
		<action name="*index" >
			<result type="redirectAction">
				<param name="namespace">{1}</param>
				<param name="actionName">index</param>
			</result> 
		</action>
	</package>
	<!-- 学生用户 -->
	<package name="stuPackage" namespace="/student" extends="struts-default,json-default">
		<action name="index">
			<result>/html/userJSP/student/studentIndex.jsp</result>
		</action>
		<action name="homepage" class="studHomePageAction">
			<result>/html/userJSP/student/studentHomePage.jsp</result>
		</action>
		<action name="*Poccfile" class="experimentAction" method="{1}_file">
			<result name="savefile" type="redirectAction">student/inExperiment?id=${expID}</result>
			<result name="deletefile" type="redirectAction">student/experiment?select=1</result>
			<result name="download" type="stream">
				<param name="inputName">fileInputStream</param>
				<param name="contentDisposition">attachment;filename="${filename}"</param>
				<param name="contentType">application/octet-stream;charset=ISO8859-1</param>
				<param name="buffersize">1024</param>
			</result>
		</action>
		<action name="experiment" class="experimentAction" method="show_studExper">
			<result>/html/userJSP/student/experiment.jsp</result>
		</action>
		<action name="inExperiment" class="experimentAction" method="show_experimentDetail">
			<result>/html/userJSP/student/inexperiment.jsp</result>
		</action>
		<action name="homework" class="homeworkAction" method="show_StudHW">
			<result>/html/userJSP/student/homework.jsp</result>
		</action>
		<action name="hwDetails" class="homeworkAction" method="show_HWdetails">
			<result>/html/userJSP/student/hwDetails.jsp</result>
		</action>
		<action name="submitHomework" class="homeworkAction" method="submit_Homework">
			<result type="redirectAction">student/homework.action?select=1</result>
		</action>
		<action name="downloadHWFile" class="homeworkAction" method="download_Homework">
			<result name="download" type="stream">
				<param name="inputName">fileInputStream</param>
				<param name="contentDisposition">attachment;filename="${filename}"</param>
				<param name="contentType">application/octet-stream;charset=ISO8859-1</param>
				<param name="buffersize">1024</param>
			</result>
		</action>
		<action name="mailbox" class="siteMsgAction" method="show_StudMsg">
			<result>/html/userJSP/student/mailbox.jsp</result>
		</action>
	</package>
</struts>    
